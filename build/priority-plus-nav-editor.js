(()=>{"use strict";const o=window.wp.i18n,e=window.wp.blocks,t=window.wp.primitives,r=window.ReactJSXRuntime;var i=(0,r.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(t.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M7.404 16.596a6.5 6.5 0 1 0 9.192-9.192 6.5 6.5 0 0 0-9.192 9.192ZM6.344 6.343a8 8 0 1 0 11.313 11.314A8 8 0 0 0 6.343 6.343Zm4.906 9.407v-3h-3v-1.5h3v-3h1.5v3h3v1.5h-3v3h-1.5Z"})});const n=window.wp.hooks,a={backgroundColor:"#ffffff",border:{color:"#dddddd",width:"1px",style:"solid"},borderRadius:"4px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",itemSpacing:{top:"0.75rem",right:"1rem",bottom:"0.75rem",left:"1rem"},itemHoverBackgroundColor:"rgba(0, 0, 0, 0.05)",itemHoverTextColor:"inherit",multiLevelIndent:"1.25rem"};(0,e.registerBlockVariation)("core/navigation",{name:"priority-plus-navigation",title:(0,o.__)("Priority Plus Navigation","priority-plus-navigation"),description:(0,o.__)('A responsive navigation that automatically moves overflow items to a "More" dropdown.',"priority-plus-navigation"),icon:i,scope:["inserter","transform"],attributes:{className:"is-style-priority-plus-navigation",overlayMenu:"never",priorityNavEnabled:!0,priorityNavMoreLabel:"More",priorityNavMoreBackgroundColor:void 0,priorityNavMoreBackgroundColorHover:void 0,priorityNavMoreTextColor:void 0,priorityNavMoreTextColorHover:void 0,priorityNavDropdownStyles:a},isActive:(o,e)=>o.className?.includes(e.className)}),(0,n.addFilter)("blocks.registerBlockType","priority-plus-navigation/extend-core-navigation",(o,e)=>"core/navigation"!==e?o:{...o,attributes:{...o.attributes,priorityNavEnabled:{type:"boolean",default:!1},priorityNavMoreLabel:{type:"string",default:"More"},priorityNavMoreIcon:{type:"string",default:"none"},priorityNavMoreBackgroundColor:{type:"string"},priorityNavMoreBackgroundColorHover:{type:"string"},priorityNavMoreTextColor:{type:"string"},priorityNavMoreTextColorHover:{type:"string"},priorityNavMorePadding:{type:"object",default:void 0},priorityNavDropdownStyles:{type:"object",default:a},priorityNavTypographyFontFamily:{type:"string"},priorityNavTypographyFontSize:{type:"string"},priorityNavTypographyFontWeight:{type:"string"},priorityNavTypographyFontStyle:{type:"string"}}});const l=window.wp.blockEditor,s=window.wp.components,p=window.wp.compose,y=window.wp.element;function u(o){if(!o||"string"!=typeof o)return o;if(o.startsWith("var:preset|")){const e=o.match(/^var:preset\|([^|]+)\|(.+)$/);if(e)return`var(--wp--preset--${e[1]}--${e[2]})`}return o.startsWith("var("),o}function d(o){if(!o)return"4px";if("string"==typeof o)return o;if("object"==typeof o){const{topLeft:e,topRight:t,bottomRight:r,bottomLeft:i}=o;return e===t&&t===r&&r===i&&e?e:`${e||"0"} ${t||"0"} ${r||"0"} ${i||"0"}`}return"4px"}function c(o){if(!o)return"0.75rem 1rem";if("string"==typeof o)return u(o);if("object"==typeof o){if(0===Object.keys(o).length)return"0.75rem 1rem";const{top:e,right:t,bottom:r,left:i}=o;if(!(e&&""!==e&&"0"!==e||t&&""!==t&&"0"!==t||r&&""!==r&&"0"!==r||i&&""!==i&&"0"!==i))return"0.75rem 1rem";const n=u(e)||"0",a=u(t)||"0",l=u(r)||"0",s=u(i)||"0";return n===a&&a===l&&l===s?n:n===l&&a===s?`${n} ${a}`:`${n} ${a} ${l} ${s}`}return"0.75rem 1rem"}function v({dropdownStyles:e,typographyStyles:t={}}){const{backgroundColor:i="#ffffff",border:n,borderRadius:a,boxShadow:l="0 4px 12px rgba(0, 0, 0, 0.15)",itemSpacing:s,itemHoverBackgroundColor:p="rgba(0, 0, 0, 0.05)",itemHoverTextColor:u="inherit",multiLevelIndent:v="1.25rem"}=e||{},[g,h]=(0,y.useState)(!0),m=(0,y.useMemo)(()=>{const o=function(o){const e="#dddddd",t="1px",r="solid",i="--wp--custom--priority-plus-navigation--dropdown--";if(!o)return{[`${i}border-color`]:e,[`${i}border-width`]:t,[`${i}border-style`]:r};if(o.color||o.width||o.style)return{[`${i}border-color`]:o.color||e,[`${i}border-width`]:o.width||t,[`${i}border-style`]:o.style||r};const n=["top","right","bottom","left"];if(n.some(e=>o[e])){const a={};if(n.forEach(n=>{const l=o[n];if(l&&(l.color||l.width||l.style)){const o=l.width||t,s=l.style||r,p=l.color||e;a[`${i}border-${n}`]=`${o} ${s} ${p}`}}),Object.keys(a).length>0)return a}return{[`${i}border-color`]:e,[`${i}border-width`]:t,[`${i}border-style`]:r}}(n),e={"--wp--custom--priority-plus-navigation--dropdown--background-color":i,"--wp--custom--priority-plus-navigation--dropdown--border-radius":d(a),"--wp--custom--priority-plus-navigation--dropdown--box-shadow":l,"--wp--custom--priority-plus-navigation--dropdown--item-spacing":c(s),"--wp--custom--priority-plus-navigation--dropdown--item-hover-background-color":p,"--wp--custom--priority-plus-navigation--dropdown--item-hover-text-color":u,"--wp--custom--priority-plus-navigation--dropdown--multi-level-indent":v,...o};return t.fontFamily&&(e.fontFamily=t.fontFamily),t.fontSize&&(e.fontSize=t.fontSize),t.fontWeight&&(e.fontWeight=t.fontWeight),t.fontStyle&&(e.fontStyle=t.fontStyle),e},[i,n,a,l,s,p,u,v,t]);return(0,r.jsxs)("div",{className:"dropdown-preview-wrapper",children:[(0,r.jsxs)("ul",{className:"priority-plus-navigation-dropdown is-open",style:m,children:[(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"#",onClick:o=>o.preventDefault(),children:(0,o.__)("Home","priority-plus-navigation")})}),(0,r.jsx)("li",{className:"dropdown-preview-hover-demo",children:(0,r.jsx)("a",{href:"#",onClick:o=>o.preventDefault(),children:(0,o.__)("About (Hover)","priority-plus-navigation")})}),(0,r.jsxs)("li",{children:[(0,r.jsxs)("button",{type:"button",className:"priority-plus-navigation-accordion-toggle priority-plus-navigation-accordion-toggle-full",onClick:()=>h(!g),"aria-expanded":g,children:[(0,r.jsx)("span",{className:"priority-plus-navigation-accordion-text",children:(0,o.__)("Services","priority-plus-navigation")}),(0,r.jsx)("span",{className:"priority-plus-navigation-accordion-arrow","aria-hidden":"true",children:"â€º"})]}),g&&(0,r.jsxs)("ul",{className:"priority-plus-navigation-accordion-content is-open",children:[(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"#",onClick:o=>o.preventDefault(),children:(0,o.__)("Web Design","priority-plus-navigation")})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"#",onClick:o=>o.preventDefault(),children:(0,o.__)("Development","priority-plus-navigation")})})]})]}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"#",onClick:o=>o.preventDefault(),children:(0,o.__)("Contact","priority-plus-navigation")})})]}),(0,r.jsx)("p",{className:"dropdown-preview-help",children:(0,o.__)('Live preview - Click "Services" to toggle accordion',"priority-plus-navigation")})]})}function g({styles:e,updateStyle:t}){return(0,r.jsx)(l.PanelColorSettings,{title:(0,o.__)("Priority Plus Menu Colors","priority-plus-navigation"),colorSettings:[{label:(0,o.__)("Background Color","priority-plus-navigation"),value:e.backgroundColor,onChange:o=>t("backgroundColor",o||"#ffffff"),clearable:!0},{label:(0,o.__)("Hover Background Color","priority-plus-navigation"),value:e.itemHoverBackgroundColor,onChange:o=>t("itemHoverBackgroundColor",o||"rgba(0, 0, 0, 0.05)"),clearable:!0},{label:(0,o.__)("Hover Text Color","priority-plus-navigation"),value:e.itemHoverTextColor,onChange:o=>t("itemHoverTextColor",o||"inherit"),clearable:!0}]})}const h="0 4px 12px rgba(0, 0, 0, 0.15)";function m({value:e,onChange:t}){const i=(0,l.useSetting)("shadow.presets.theme")||[],n=(0,l.useSetting)("shadow.presets.default")||[],a=(0,y.useMemo)(()=>{const e=[{value:"none",label:(0,o.__)("None","priority-plus-navigation")},{value:h,label:(0,o.__)("Default","priority-plus-navigation")}];return i.length>0&&i.forEach(o=>{e.push({value:o.shadow,label:o.name})}),n.length>0&&n.forEach(o=>{e.push({value:o.shadow,label:o.name})}),e},[i,n]),[p,u]=(0,y.useState)(a);return(0,r.jsx)(s.ComboboxControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,o.__)("Shadow","priority-plus-navigation"),value:e,onChange:o=>{t(o)},options:p,onFilterValueChange:o=>{if(!o)return void u(a);const e=o.toLowerCase();u(a.filter(o=>o.label.toLowerCase().includes(e)))}})}function b({styles:e,updateStyle:t,hasBorderValue:i,hasValue:n,resetToDefault:a}){const p=(0,l.useSetting)("color.palette")||[];return(0,r.jsxs)(s.__experimentalToolsPanel,{label:(0,o.__)("Priority Plus Menu Styles","priority-plus-navigation"),resetAll:()=>{t("border",void 0),t("borderRadius",void 0),t("boxShadow",h)},children:[(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>{return!!(o=e.border)&&(!!(o.color||o.width||o.style)||["top","right","bottom","left"].some(e=>{const t=o[e];return t&&(t.color||t.width||t.style)}));var o},label:(0,o.__)("Border","priority-plus-navigation"),onDeselect:()=>{t("border",void 0)},isShownByDefault:!0,children:(0,r.jsx)(s.__experimentalBorderBoxControl,{label:(0,o.__)("Border","priority-plus-navigation"),colors:p,value:e.border,onChange:o=>{t("border",o)},enableAlpha:!0,enableStyle:!0,size:"__unstable-large"})}),(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>{return!!(o=e.borderRadius)&&("string"==typeof o?""!==o:"object"==typeof o&&Object.values(o).some(o=>o&&""!==o));var o},label:(0,o.__)("Border Radius","priority-plus-navigation"),onDeselect:()=>a("borderRadius",void 0),isShownByDefault:!0,children:(0,r.jsx)(l.__experimentalBorderRadiusControl,{values:e.borderRadius,onChange:o=>t("borderRadius",o)})}),(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>n("boxShadow"),label:(0,o.__)("Shadow","priority-plus-navigation"),onDeselect:()=>a("boxShadow",h),isShownByDefault:!0,children:(0,r.jsx)(m,{value:e.boxShadow||h,onChange:o=>t("boxShadow",o)})})]})}function f({styles:e,spacingSizes:t,updateStyle:i,hasValue:n,hasItemSpacingValue:p}){return(0,r.jsxs)(s.__experimentalToolsPanel,{label:(0,o.__)("Priority Plus Nav Item Spacing","priority-plus-navigation"),resetAll:()=>{i("itemSpacing",a.itemSpacing),i("multiLevelIndent",a.multiLevelIndent)},children:[(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:p,label:(0,o.__)("Padding","priority-plus-navigation"),onDeselect:()=>i("itemSpacing",a.itemSpacing),isShownByDefault:!0,children:t.length>0?(0,r.jsx)(l.__experimentalSpacingSizesControl,{values:e.itemSpacing,onChange:o=>i("itemSpacing",o),label:(0,o.__)("Nav Item Spacing","priority-plus-navigation"),sides:["top","right","bottom","left"],units:["px","em","rem","vh","vw"]}):(0,r.jsx)(s.BoxControl,{label:(0,o.__)("Nav Item Spacing","priority-plus-navigation"),values:e.itemSpacing,onChange:o=>i("itemSpacing",o),sides:["top","right","bottom","left"],units:["px","em","rem","vh","vw"],allowReset:!0})}),(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>n("multiLevelIndent"),label:(0,o.__)("Submenu Indentation","priority-plus-navigation"),onDeselect:()=>i("multiLevelIndent","1.25rem"),isShownByDefault:!0,children:(0,r.jsx)(s.__experimentalUnitControl,{label:(0,o.__)("Submenu Indentation","priority-plus-navigation"),value:e.multiLevelIndent||"1.25rem",onChange:o=>i("multiLevelIndent",o),help:(0,o.__)("Indentation for nested submenu items","priority-plus-navigation"),units:[{value:"px",label:"px"},{value:"rem",label:"rem"},{value:"em",label:"em"}]})})]})}function x({attributes:e,setAttributes:t,onClose:i}){const n={...a,...e.priorityNavDropdownStyles||{},itemSpacing:e.priorityNavDropdownStyles?.itemSpacing||a.itemSpacing},p=(0,l.useSetting)("typography.fontSizes")||[],u=(0,l.useSetting)("typography.fontFamilies")||[],d={};if(e.priorityNavTypographyFontFamily){let o=[];u&&"object"==typeof u&&!Array.isArray(u)?(u.theme&&Array.isArray(u.theme)&&(o=o.concat(u.theme)),u.custom&&Array.isArray(u.custom)&&(o=o.concat(u.custom))):Array.isArray(u)&&u.forEach(e=>{e.fontFamilies&&Array.isArray(e.fontFamilies)?o=o.concat(e.fontFamilies):e.slug&&e.fontFamily&&o.push(e)});const t=o.find(o=>o.slug===e.priorityNavTypographyFontFamily);t&&(d.fontFamily=t.fontFamily)}if(e.priorityNavTypographyFontSize){let o=[];Array.isArray(p)&&p.forEach(e=>{e.sizes&&Array.isArray(e.sizes)?o=o.concat(e.sizes):e.slug&&e.size&&o.push(e)});const t=o.find(o=>o.slug===e.priorityNavTypographyFontSize);t&&(d.fontSize=t.size)}e.priorityNavTypographyFontWeight&&(d.fontWeight=e.priorityNavTypographyFontWeight),e.priorityNavTypographyFontStyle&&(d.fontStyle=e.priorityNavTypographyFontStyle);const c=(0,l.useSetting)("spacing.spacingSizes")||[];(0,y.useEffect)(()=>{e.priorityNavDropdownStyles?.itemSpacing||t({priorityNavDropdownStyles:{...a,...e.priorityNavDropdownStyles||{}}})},[]);const h=(o,r)=>{const i={...{...a,...e.priorityNavDropdownStyles||{}},[o]:r};t({priorityNavDropdownStyles:i})},m=o=>!!n[o];return(0,r.jsxs)(s.Modal,{title:(0,o.__)("Customize Dropdown Styles","priority-plus-navigation"),onRequestClose:i,className:"priority-plus-dropdown-customizer",size:"large",isDismissible:!0,children:[(0,r.jsxs)("div",{className:"dropdown-customizer-layout",children:[(0,r.jsxs)("div",{className:"dropdown-customizer-controls",children:[(0,r.jsx)(g,{styles:n,updateStyle:h}),(0,r.jsx)(b,{styles:n,updateStyle:h,hasBorderValue:()=>{const o=n.border;return!!o&&(!!(o.color||o.width||o.style)||["top","right","bottom","left"].some(e=>{const t=o[e];return t&&(t.color||t.width||t.style)}))},hasValue:m,resetToDefault:(o,e)=>{h(o,e)}}),(0,r.jsx)(f,{styles:n,spacingSizes:c,updateStyle:h,hasValue:m,hasItemSpacingValue:()=>!!n.itemSpacing&&("object"==typeof n.itemSpacing?Object.values(n.itemSpacing).some(o=>o&&""!==o):!!n.itemSpacing)})]}),(0,r.jsx)("div",{className:"dropdown-customizer-preview",children:(0,r.jsx)(v,{dropdownStyles:n,typographyStyles:d})})]}),(0,r.jsxs)("div",{className:"dropdown-customizer-footer",children:[(0,r.jsx)(s.Button,{variant:"tertiary",isDestructive:!0,onClick:()=>{t({priorityNavDropdownStyles:a})},children:(0,o.__)("Reset to Defaults","priority-plus-navigation")}),(0,r.jsx)(s.Button,{variant:"primary",onClick:i,children:(0,o.__)("Done","priority-plus-navigation")})]})]})}const _=(0,p.createHigherOrderComponent)(o=>e=>{const{name:t,attributes:i}=e;if("core/navigation"!==t)return(0,r.jsx)(o,{...e});const n=(i.className||"").includes("is-style-priority-plus-navigation")||!0===i.priorityNavEnabled;return(0,y.useEffect)(()=>{if(!n)return;const o=document.querySelector(".block-editor-block-inspector");if(!o)return;const e=o.querySelector('.components-toggle-group-control-option-base[data-value="always"]');e&&(e.style.opacity="0.4",e.style.pointerEvents="none",e.style.textDecoration="line-through",e.style.cursor="not-allowed")},[n,i.overlayMenu]),(0,r.jsx)(o,{...e})},"addDisableAlwaysOption"),w=(0,p.createHigherOrderComponent)(e=>t=>{const{name:i,attributes:n,setAttributes:p}=t;if("core/navigation"!==i)return(0,r.jsx)(e,{...t});const u=(n.className||"").includes("is-style-priority-plus-navigation")||!0===n.priorityNavEnabled;if(!u)return(0,r.jsx)(e,{...t});const{priorityNavEnabled:d,priorityNavMoreLabel:c,priorityNavMoreBackgroundColor:v,priorityNavMoreBackgroundColorHover:g,priorityNavMoreTextColor:h,priorityNavMoreTextColorHover:m,priorityNavMorePadding:b,overlayMenu:f}=n,[_,w]=(0,y.useState)(!1);(0,y.useEffect)(()=>{u&&"always"===f&&p({overlayMenu:"mobile"})},[u,f,p]),(0,y.useEffect)(()=>{if(!u)return;const o=n.style?.typography?.fontWeight,e=n.style?.typography?.fontStyle;n.fontSize===n.priorityNavTypographyFontSize&&n.fontFamily===n.priorityNavTypographyFontFamily&&o===n.priorityNavTypographyFontWeight&&e===n.priorityNavTypographyFontStyle||p({priorityNavTypographyFontFamily:n.fontFamily,priorityNavTypographyFontSize:n.fontSize,priorityNavTypographyFontWeight:o,priorityNavTypographyFontStyle:e})},[u,n.fontSize,n.fontFamily,n.style?.typography?.fontWeight,n.style?.typography?.fontStyle,n.priorityNavTypographyFontFamily,n.priorityNavTypographyFontSize,n.priorityNavTypographyFontWeight,n.priorityNavTypographyFontStyle,p]);const S=(0,l.useSetting)("spacing.spacingSizes")||[];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e,{...t}),(0,r.jsx)(l.InspectorControls,{group:"settings",children:(0,r.jsx)(s.Notice,{status:"info",isDismissible:!1,children:(0,o.__)('Priority Plus Navigation is not compatible with "Always" overlay menu. The overlay menu is set to "Mobile" to allow Priority+ to work on desktop.',"priority-plus-navigation")})}),(0,r.jsxs)(l.InspectorControls,{group:"styles",children:[(0,r.jsx)(s.__experimentalToolsPanel,{label:(0,o.__)("Priority Plus Settings","priority-plus-navigation"),resetAll:()=>p({priorityNavMoreLabel:"More"}),children:(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!!c,label:(0,o.__)("More Button Label","priority-plus-navigation"),onDeselect:()=>p({priorityNavMoreLabel:"More"}),isShownByDefault:!0,children:(0,r.jsx)(s.TextControl,{label:(0,o.__)("More Button Label","priority-plus-navigation"),value:c,onChange:o=>p({priorityNavMoreLabel:o}),help:(0,o.__)('Text displayed on the "More" button',"priority-plus-navigation")})})}),(0,r.jsx)(l.PanelColorSettings,{title:(0,o.__)("Priority Plus Colors","priority-plus-navigation"),colorSettings:[{label:(0,o.__)("Button Text Color","priority-plus-navigation"),value:h,onChange:o=>p({priorityNavMoreTextColor:o||void 0}),clearable:!0},{label:(0,o.__)("Button Text Hover Color","priority-plus-navigation"),value:m,onChange:o=>p({priorityNavMoreTextColorHover:o||void 0}),clearable:!0},{label:(0,o.__)("Button Background Color","priority-plus-navigation"),value:v,onChange:o=>p({priorityNavMoreBackgroundColor:o||void 0}),clearable:!0},{label:(0,o.__)("Button Background Hover Color","priority-plus-navigation"),value:g,onChange:o=>p({priorityNavMoreBackgroundColorHover:o||void 0}),clearable:!0}]}),(0,r.jsx)(s.__experimentalToolsPanel,{label:(0,o.__)("Priority Plus Button","priority-plus-navigation"),resetAll:()=>p({priorityNavMorePadding:void 0}),children:(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!!b&&Object.keys(b).length>0,label:(0,o.__)("Padding","priority-plus-navigation"),onDeselect:()=>p({priorityNavMorePadding:void 0}),isShownByDefault:!0,children:S.length>0?(0,r.jsx)(l.__experimentalSpacingSizesControl,{values:b,onChange:o=>p({priorityNavMorePadding:o}),label:(0,o.__)("Button Padding","priority-plus-navigation"),sides:["top","right","bottom","left"],units:["px","em","rem","vh","vw"]}):(0,r.jsx)(s.BoxControl,{label:(0,o.__)("Button Padding","priority-plus-navigation"),values:b,onChange:o=>p({priorityNavMorePadding:o}),sides:["top","right","bottom","left"],units:["px","em","rem","vh","vw"],allowReset:!0})})}),(0,r.jsx)(s.__experimentalToolsPanel,{label:(0,o.__)("Dropdown Styles","priority-plus-navigation"),resetAll:()=>{p({priorityNavDropdownStyles:a})},children:(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>{const{priorityNavDropdownStyles:o}=n;return!!o&&Object.keys(o).length>0},label:(0,o.__)("Customize Dropdown","priority-plus-navigation"),onDeselect:()=>p({priorityNavDropdownStyles:void 0}),isShownByDefault:!0,children:(0,r.jsx)(s.Button,{variant:"secondary",onClick:()=>w(!0),children:(0,o.__)("Customize Dropdown","priority-plus-navigation")})})})]}),_&&(0,r.jsx)(x,{attributes:n,setAttributes:p,onClose:()=>w(!1)})]})},"withPriorityNavControls");(0,n.addFilter)("editor.BlockEdit","priority-plus-navigation/add-disable-always-option",_,5),(0,n.addFilter)("editor.BlockEdit","priority-plus-navigation/add-priority-plus-navigation-controls",w,10)})();