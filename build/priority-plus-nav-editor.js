(()=>{"use strict";const e=window.wp.i18n,o=window.wp.blocks,r=window.wp.primitives,i=window.ReactJSXRuntime;var t=(0,i.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(r.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M7.404 16.596a6.5 6.5 0 1 0 9.192-9.192 6.5 6.5 0 0 0-9.192 9.192ZM6.344 6.343a8 8 0 1 0 11.313 11.314A8 8 0 0 0 6.343 6.343Zm4.906 9.407v-3h-3v-1.5h3v-3h1.5v3h3v1.5h-3v3h-1.5Z"})});const l=window.wp.hooks;(0,o.registerBlockVariation)("core/navigation",{name:"priority-plus-navigation",title:(0,e.__)("Priority Plus Navigation","priority-plus-navigation"),description:(0,e.__)('A responsive navigation that automatically moves overflow items to a "More" dropdown.',"priority-plus-navigation"),icon:t,scope:["inserter","transform"],attributes:{className:"is-style-priority-plus-navigation",overlayMenu:"never",priorityNavEnabled:!0,priorityNavMoreLabel:"More",priorityNavMoreBackgroundColor:void 0,priorityNavMoreBackgroundColorHover:void 0,priorityNavMoreTextColor:void 0,priorityNavMoreTextColorHover:void 0,priorityNavDropdownStyles:{backgroundColor:"#ffffff",borderColor:"#dddddd",borderWidth:"1px",borderRadius:"4px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",itemSpacing:"0.75rem 1.25rem",itemHoverBackgroundColor:"rgba(0, 0, 0, 0.05)",itemHoverTextColor:"inherit",multiLevelIndent:"1.25rem"}},isActive:(e,o)=>e.className?.includes(o.className)}),(0,l.addFilter)("blocks.registerBlockType","priority-plus-navigation/extend-core-navigation",(e,o)=>"core/navigation"!==o?e:{...e,attributes:{...e.attributes,priorityNavEnabled:{type:"boolean",default:!1},priorityNavMoreLabel:{type:"string",default:"More"},priorityNavMoreIcon:{type:"string",default:"none"},priorityNavMoreBackgroundColor:{type:"string"},priorityNavMoreBackgroundColorHover:{type:"string"},priorityNavMoreTextColor:{type:"string"},priorityNavMoreTextColorHover:{type:"string"},priorityNavMorePadding:{type:"object",default:void 0},priorityNavDropdownStyles:{type:"object",default:{backgroundColor:"#ffffff",borderColor:"#dddddd",borderWidth:"1px",borderRadius:"4px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",itemSpacing:"0.75rem 1.25rem",itemHoverBackgroundColor:"rgba(0, 0, 0, 0.05)",itemHoverTextColor:"inherit",multiLevelIndent:"1.25rem"}}}});const n=window.wp.blockEditor,a=window.wp.components,s=window.wp.compose,d=window.wp.element;function p({dropdownStyles:o}){const{backgroundColor:r="#ffffff",borderColor:t="#dddddd",borderWidth:l="1px",borderRadius:n="4px",boxShadow:a="0 4px 12px rgba(0, 0, 0, 0.15)",itemSpacing:s="0.75rem 1.25rem",itemHoverBackgroundColor:p="rgba(0, 0, 0, 0.05)",itemHoverTextColor:u="inherit",multiLevelIndent:v="1.25rem"}=o||{},[c,m]=(0,d.useState)(!0),g=(0,d.useMemo)(()=>({"--preview-background-color":r,"--preview-border-color":t,"--preview-border-width":l,"--preview-border-radius":n,"--preview-box-shadow":a,"--preview-item-spacing":s,"--preview-item-hover-background":p,"--preview-item-hover-text":u,"--preview-multi-level-indent":v}),[r,t,l,n,a,s,p,u,v]);return(0,i.jsxs)("div",{className:"dropdown-preview-wrapper",children:[(0,i.jsx)("div",{className:"dropdown-preview-container",style:g,children:(0,i.jsxs)("ul",{className:"dropdown-preview-menu",children:[(0,i.jsx)("li",{className:"dropdown-preview-item",children:(0,i.jsx)("a",{href:"#",onClick:e=>e.preventDefault(),children:(0,e.__)("Home","priority-plus-navigation")})}),(0,i.jsx)("li",{className:"dropdown-preview-item dropdown-preview-item--hover",children:(0,i.jsx)("a",{href:"#",onClick:e=>e.preventDefault(),children:(0,e.__)("About (Hover)","priority-plus-navigation")})}),(0,i.jsxs)("li",{className:"dropdown-preview-item dropdown-preview-item--has-accordion",children:[(0,i.jsxs)("button",{className:"dropdown-preview-accordion-toggle",onClick:()=>m(!c),"aria-expanded":c,children:[(0,i.jsx)("span",{className:"dropdown-preview-accordion-text",children:(0,e.__)("Services","priority-plus-navigation")}),(0,i.jsx)("span",{className:"dropdown-preview-accordion-arrow",children:"â–¸"})]}),c&&(0,i.jsxs)("ul",{className:"dropdown-preview-submenu",children:[(0,i.jsx)("li",{className:"dropdown-preview-item dropdown-preview-item--nested",children:(0,i.jsx)("a",{href:"#",onClick:e=>e.preventDefault(),children:(0,e.__)("Web Design","priority-plus-navigation")})}),(0,i.jsx)("li",{className:"dropdown-preview-item dropdown-preview-item--nested",children:(0,i.jsx)("a",{href:"#",onClick:e=>e.preventDefault(),children:(0,e.__)("Development","priority-plus-navigation")})})]})]}),(0,i.jsx)("li",{className:"dropdown-preview-item",children:(0,i.jsx)("a",{href:"#",onClick:e=>e.preventDefault(),children:(0,e.__)("Contact","priority-plus-navigation")})})]})}),(0,i.jsx)("p",{className:"dropdown-preview-help",children:(0,e.__)('Live preview - Click "Services" to toggle accordion',"priority-plus-navigation")})]})}function u(e){if(!e||"string"!=typeof e)return{top:"0",right:"0",bottom:"0",left:"0"};const o=e.trim().split(/\s+/);return 1===o.length?{top:o[0],right:o[0],bottom:o[0],left:o[0]}:2===o.length?{top:o[0],right:o[1],bottom:o[0],left:o[1]}:3===o.length?{top:o[0],right:o[1],bottom:o[2],left:o[1]}:4===o.length?{top:o[0],right:o[1],bottom:o[2],left:o[3]}:{top:"0",right:"0",bottom:"0",left:"0"}}function v({attributes:o,setAttributes:r,onClose:t}){const{priorityNavDropdownStyles:l={}}=o,n=(e,o)=>{r({priorityNavDropdownStyles:{...l,[e]:o}})},s=e=>!!l[e],d=(e,o)=>{n(e,o)};return(0,i.jsxs)(a.Modal,{title:(0,e.__)("Customize Dropdown Styles","priority-plus-navigation"),onRequestClose:t,className:"priority-plus-dropdown-customizer",size:"fill",isDismissible:!0,children:[(0,i.jsxs)("div",{className:"dropdown-customizer-layout",children:[(0,i.jsxs)("div",{className:"dropdown-customizer-controls",children:[(0,i.jsxs)(a.__experimentalToolsPanel,{label:(0,e.__)("Dropdown Container","priority-plus-navigation"),resetAll:()=>{n("backgroundColor","#ffffff"),n("borderColor","#dddddd"),n("borderWidth","1px"),n("borderRadius","4px"),n("boxShadow","0 4px 12px rgba(0, 0, 0, 0.15)")},children:[(0,i.jsx)(a.__experimentalToolsPanelItem,{hasValue:()=>s("backgroundColor"),label:(0,e.__)("Background Color","priority-plus-navigation"),onDeselect:()=>d("backgroundColor","#ffffff"),isShownByDefault:!0,children:(0,i.jsxs)("div",{className:"dropdown-customizer-control",children:[(0,i.jsx)("label",{children:(0,e.__)("Background Color","priority-plus-navigation")}),(0,i.jsx)(a.ColorPicker,{color:l.backgroundColor||"#ffffff",onChange:e=>n("backgroundColor",e),enableAlpha:!0})]})}),(0,i.jsx)(a.__experimentalToolsPanelItem,{hasValue:()=>s("borderColor"),label:(0,e.__)("Border Color","priority-plus-navigation"),onDeselect:()=>d("borderColor","#dddddd"),isShownByDefault:!0,children:(0,i.jsxs)("div",{className:"dropdown-customizer-control",children:[(0,i.jsx)("label",{children:(0,e.__)("Border Color","priority-plus-navigation")}),(0,i.jsx)(a.ColorPicker,{color:l.borderColor||"#dddddd",onChange:e=>n("borderColor",e),enableAlpha:!0})]})}),(0,i.jsx)(a.__experimentalToolsPanelItem,{hasValue:()=>s("borderWidth"),label:(0,e.__)("Border Width","priority-plus-navigation"),onDeselect:()=>d("borderWidth","1px"),isShownByDefault:!0,children:(0,i.jsx)(a.__experimentalUnitControl,{label:(0,e.__)("Border Width","priority-plus-navigation"),value:l.borderWidth||"1px",onChange:e=>n("borderWidth",e),units:[{value:"px",label:"px"},{value:"rem",label:"rem"},{value:"em",label:"em"}]})}),(0,i.jsx)(a.__experimentalToolsPanelItem,{hasValue:()=>s("borderRadius"),label:(0,e.__)("Border Radius","priority-plus-navigation"),onDeselect:()=>d("borderRadius","4px"),isShownByDefault:!0,children:(0,i.jsx)(a.__experimentalUnitControl,{label:(0,e.__)("Border Radius","priority-plus-navigation"),value:l.borderRadius||"4px",onChange:e=>n("borderRadius",e),units:[{value:"px",label:"px"},{value:"rem",label:"rem"},{value:"%",label:"%"}]})}),(0,i.jsx)(a.__experimentalToolsPanelItem,{hasValue:()=>s("boxShadow"),label:(0,e.__)("Box Shadow","priority-plus-navigation"),onDeselect:()=>d("boxShadow","0 4px 12px rgba(0, 0, 0, 0.15)"),isShownByDefault:!0,children:(0,i.jsx)(a.TextControl,{label:(0,e.__)("Box Shadow","priority-plus-navigation"),value:l.boxShadow||"0 4px 12px rgba(0, 0, 0, 0.15)",onChange:e=>n("boxShadow",e),help:(0,e.__)("CSS box-shadow property","priority-plus-navigation")})})]}),(0,i.jsxs)(a.__experimentalToolsPanel,{label:(0,e.__)("Dropdown Items","priority-plus-navigation"),resetAll:()=>{n("itemSpacing","0.75rem 1.25rem"),n("itemHoverBackgroundColor","rgba(0, 0, 0, 0.05)"),n("itemHoverTextColor","inherit"),n("multiLevelIndent","1.25rem")},children:[(0,i.jsx)(a.__experimentalToolsPanelItem,{hasValue:()=>s("itemSpacing"),label:(0,e.__)("Item Spacing","priority-plus-navigation"),onDeselect:()=>d("itemSpacing","0.75rem 1.25rem"),isShownByDefault:!0,children:(0,i.jsx)(a.__experimentalBoxControl,{label:(0,e.__)("Item Spacing (Padding)","priority-plus-navigation"),values:u(l.itemSpacing||"0.75rem 1.25rem"),onChange:e=>n("itemSpacing",function(e){if(!e)return"";const{top:o="0",right:r="0",bottom:i="0",left:t="0"}=e;return o===r&&r===i&&i===t?o:o===i&&r===t?`${o} ${r}`:`${o} ${r} ${i} ${t}`}(e)),sides:["top","right","bottom","left"],units:[{value:"px",label:"px"},{value:"rem",label:"rem"},{value:"em",label:"em"}]})}),(0,i.jsx)(a.__experimentalToolsPanelItem,{hasValue:()=>s("itemHoverBackgroundColor"),label:(0,e.__)("Hover Background","priority-plus-navigation"),onDeselect:()=>d("itemHoverBackgroundColor","rgba(0, 0, 0, 0.05)"),isShownByDefault:!0,children:(0,i.jsxs)("div",{className:"dropdown-customizer-control",children:[(0,i.jsx)("label",{children:(0,e.__)("Hover Background Color","priority-plus-navigation")}),(0,i.jsx)(a.ColorPicker,{color:l.itemHoverBackgroundColor||"rgba(0, 0, 0, 0.05)",onChange:e=>n("itemHoverBackgroundColor",e),enableAlpha:!0})]})}),(0,i.jsx)(a.__experimentalToolsPanelItem,{hasValue:()=>s("itemHoverTextColor"),label:(0,e.__)("Hover Text Color","priority-plus-navigation"),onDeselect:()=>d("itemHoverTextColor","inherit"),children:(0,i.jsxs)("div",{className:"dropdown-customizer-control",children:[(0,i.jsx)("label",{children:(0,e.__)("Hover Text Color","priority-plus-navigation")}),(0,i.jsx)(a.ColorPicker,{color:l.itemHoverTextColor||"inherit",onChange:e=>n("itemHoverTextColor",e),enableAlpha:!0})]})}),(0,i.jsx)(a.__experimentalToolsPanelItem,{hasValue:()=>s("multiLevelIndent"),label:(0,e.__)("Multi-level Indent","priority-plus-navigation"),onDeselect:()=>d("multiLevelIndent","1.25rem"),isShownByDefault:!0,children:(0,i.jsx)(a.__experimentalUnitControl,{label:(0,e.__)("Multi-level Indent","priority-plus-navigation"),value:l.multiLevelIndent||"1.25rem",onChange:e=>n("multiLevelIndent",e),help:(0,e.__)("Indentation for nested submenu items","priority-plus-navigation"),units:[{value:"px",label:"px"},{value:"rem",label:"rem"},{value:"em",label:"em"}]})})]})]}),(0,i.jsx)("div",{className:"dropdown-customizer-preview",children:(0,i.jsx)(p,{dropdownStyles:l})})]}),(0,i.jsxs)("div",{className:"dropdown-customizer-footer",children:[(0,i.jsx)(a.Button,{variant:"tertiary",isDestructive:!0,onClick:()=>{r({priorityNavDropdownStyles:{backgroundColor:"#ffffff",borderColor:"#dddddd",borderWidth:"1px",borderRadius:"4px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",itemSpacing:"0.75rem 1.25rem",itemHoverBackgroundColor:"rgba(0, 0, 0, 0.05)",itemHoverTextColor:"inherit",multiLevelIndent:"1.25rem"}})},children:(0,e.__)("Reset to Defaults","priority-plus-navigation")}),(0,i.jsx)(a.Button,{variant:"primary",onClick:t,children:(0,e.__)("Done","priority-plus-navigation")})]})]})}const c=(0,s.createHigherOrderComponent)(e=>o=>{const{name:r,attributes:t}=o;if("core/navigation"!==r)return(0,i.jsx)(e,{...o});const l=(t.className||"").includes("is-style-priority-plus-navigation")||!0===t.priorityNavEnabled;return(0,d.useEffect)(()=>{if(!l)return;const e=document.querySelector(".block-editor-block-inspector");if(!e)return;const o=e.querySelector('.components-toggle-group-control-option-base[data-value="always"]');o&&(o.style.opacity="0.4",o.style.pointerEvents="none",o.style.textDecoration="line-through",o.style.cursor="not-allowed")},[l,t.overlayMenu]),(0,i.jsx)(e,{...o})},"addDisableAlwaysOption"),m=(0,s.createHigherOrderComponent)(o=>r=>{const{name:t,attributes:l,setAttributes:s}=r;if("core/navigation"!==t)return(0,i.jsx)(o,{...r});const p=(l.className||"").includes("is-style-priority-plus-navigation")||!0===l.priorityNavEnabled;if(!p)return(0,i.jsx)(o,{...r});const{priorityNavEnabled:u,priorityNavMoreLabel:c,priorityNavMoreBackgroundColor:m,priorityNavMoreBackgroundColorHover:g,priorityNavMoreTextColor:x,priorityNavMoreTextColorHover:h,priorityNavMorePadding:b,overlayMenu:y}=l,[w,_]=(0,d.useState)(!1);(0,d.useEffect)(()=>{p&&"always"===y&&s({overlayMenu:"mobile"})},[p,y,s]);const C=(0,n.useSetting)("spacing.spacingSizes")||[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o,{...r}),(0,i.jsx)(n.InspectorControls,{group:"settings",children:(0,i.jsx)(a.Notice,{status:"info",isDismissible:!1,children:(0,e.__)('Priority Plus Navigation is not compatible with "Always" overlay menu. The overlay menu is set to "Mobile" to allow Priority+ to work on desktop.',"priority-plus-navigation")})}),(0,i.jsxs)(n.InspectorControls,{group:"styles",children:[(0,i.jsx)(a.__experimentalToolsPanel,{label:(0,e.__)("Priority Plus Settings","priority-plus-navigation"),resetAll:()=>s({priorityNavMoreLabel:"More"}),children:(0,i.jsx)(a.__experimentalToolsPanelItem,{hasValue:()=>!!c,label:(0,e.__)("More Button Label","priority-plus-navigation"),onDeselect:()=>s({priorityNavMoreLabel:"More"}),isShownByDefault:!0,children:(0,i.jsx)(a.TextControl,{label:(0,e.__)("More Button Label","priority-plus-navigation"),value:c,onChange:e=>s({priorityNavMoreLabel:e}),help:(0,e.__)('Text displayed on the "More" button',"priority-plus-navigation")})})}),(0,i.jsx)(n.PanelColorSettings,{title:(0,e.__)("Priority Plus Colors","priority-plus-navigation"),colorSettings:[{label:(0,e.__)("Button Text Color","priority-plus-navigation"),value:x,onChange:e=>s({priorityNavMoreTextColor:e||void 0}),clearable:!0},{label:(0,e.__)("Button Text Hover Color","priority-plus-navigation"),value:h,onChange:e=>s({priorityNavMoreTextColorHover:e||void 0}),clearable:!0},{label:(0,e.__)("Button Background Color","priority-plus-navigation"),value:m,onChange:e=>s({priorityNavMoreBackgroundColor:e||void 0}),clearable:!0},{label:(0,e.__)("Button Background Hover Color","priority-plus-navigation"),value:g,onChange:e=>s({priorityNavMoreBackgroundColorHover:e||void 0}),clearable:!0}]}),(0,i.jsx)(a.__experimentalToolsPanel,{label:(0,e.__)("Priority Plus Button","priority-plus-navigation"),resetAll:()=>s({priorityNavMorePadding:void 0}),children:(0,i.jsx)(a.__experimentalToolsPanelItem,{hasValue:()=>!!b&&Object.keys(b).length>0,label:(0,e.__)("Padding","priority-plus-navigation"),onDeselect:()=>s({priorityNavMorePadding:void 0}),isShownByDefault:!0,children:C.length>0?(0,i.jsx)(n.__experimentalSpacingSizesControl,{values:b,onChange:e=>s({priorityNavMorePadding:e}),label:(0,e.__)("Button Padding","priority-plus-navigation"),sides:["top","right","bottom","left"],units:["px","em","rem","vh","vw"]}):(0,i.jsx)(a.BoxControl,{label:(0,e.__)("Button Padding","priority-plus-navigation"),values:b,onChange:e=>s({priorityNavMorePadding:e}),sides:["top","right","bottom","left"],units:["px","em","rem","vh","vw"],allowReset:!0})})}),(0,i.jsx)(a.__experimentalToolsPanel,{label:(0,e.__)("Dropdown Styles","priority-plus-navigation"),resetAll:()=>{s({priorityNavDropdownStyles:{backgroundColor:"#ffffff",borderColor:"#dddddd",borderWidth:"1px",borderRadius:"4px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",itemSpacing:"0.75rem 1.25rem",itemHoverBackgroundColor:"rgba(0, 0, 0, 0.05)",itemHoverTextColor:"inherit",multiLevelIndent:"1.25rem"}})},children:(0,i.jsx)(a.__experimentalToolsPanelItem,{hasValue:()=>{const{priorityNavDropdownStyles:e}=l;return!!e&&Object.keys(e).length>0},label:(0,e.__)("Customize Dropdown","priority-plus-navigation"),onDeselect:()=>s({priorityNavDropdownStyles:void 0}),isShownByDefault:!0,children:(0,i.jsx)(a.Button,{variant:"secondary",onClick:()=>_(!0),style:{width:"100%"},children:(0,e.__)("Customize Dropdown Styles","priority-plus-navigation")})})})]}),w&&(0,i.jsx)(v,{attributes:l,setAttributes:s,onClose:()=>_(!1)})]})},"withPriorityNavControls");(0,l.addFilter)("editor.BlockEdit","priority-plus-navigation/add-disable-always-option",c,5),(0,l.addFilter)("editor.BlockEdit","priority-plus-navigation/add-priority-plus-navigation-controls",m,10)})();