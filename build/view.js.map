{"version":3,"file":"view.js","mappings":"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","sources":["webpack://priority-plus-nav-block/./src/view.js"],"sourcesContent":["class PriorityNav {\n\t// Static counter for generating unique instance IDs\n\tstatic instanceCounter = 0;\n\n\tconstructor( element ) {\n\t\t// Generate unique instance ID for this PriorityNav instance\n\t\tthis.instanceId = `priority-nav-${ PriorityNav.instanceCounter++ }`;\n\n\t\t// Support both wrapper mode and direct mode\n\t\t// Wrapper mode: element has [data-priority-nav] and contains .wp-block-navigation\n\t\t// Direct mode: element IS .wp-block-navigation with [data-priority-nav]\n\t\tif (\n\t\t\telement.classList.contains( 'wp-block-navigation' ) &&\n\t\t\telement.hasAttribute( 'data-priority-nav' )\n\t\t) {\n\t\t\t// Direct mode: element is the nav itself\n\t\t\tthis.nav = element;\n\t\t\tthis.wrapper = element; // Use nav as wrapper for compatibility\n\t\t} else {\n\t\t\t// Wrapper mode: look for nav inside\n\t\t\tthis.wrapper = element;\n\t\t\tthis.nav = element.querySelector( '.wp-block-navigation' );\n\t\t}\n\n\t\tif ( ! this.nav ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.list = this.nav.querySelector( '.wp-block-navigation__container' );\n\t\t// Get attributes from nav element (works for both modes since we inject on nav)\n\t\tthis.moreLabel = this.nav.getAttribute( 'data-more-label' ) || 'More';\n\t\tthis.moreIcon = this.nav.getAttribute( 'data-more-icon' ) || 'dots';\n\n\t\t// Check if navigation has openSubmenusOnClick setting\n\t\t// WordPress stores this as data attribute on the nav block\n\t\t// Check all possible attribute name formats\n\t\tlet openSubmenusOnClickAttr = null;\n\n\t\t// Check all data attributes on nav element\n\t\tif ( this.nav.attributes ) {\n\t\t\tfor ( let i = 0; i < this.nav.attributes.length; i++ ) {\n\t\t\t\tconst attr = this.nav.attributes[ i ];\n\t\t\t\tconst name = attr.name.toLowerCase();\n\t\t\t\t// WordPress may use various formats\n\t\t\t\tif (\n\t\t\t\t\tname.includes( 'open' ) &&\n\t\t\t\t\tname.includes( 'submenu' ) &&\n\t\t\t\t\tname.includes( 'click' )\n\t\t\t\t) {\n\t\t\t\t\topenSubmenusOnClickAttr = attr.value;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// Also check for \"opensubmenusonclick\" variations\n\t\t\t\tif (\n\t\t\t\t\tname === 'data-opensubmenusonclick' ||\n\t\t\t\t\tname === 'data-open-submenus-on-click'\n\t\t\t\t) {\n\t\t\t\t\topenSubmenusOnClickAttr = attr.value;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Also check for class-based indicators\n\t\t// WordPress might use class names like \"open-on-click\" or \"open-submenus-on-click\"\n\t\tif ( openSubmenusOnClickAttr === null ) {\n\t\t\tif (\n\t\t\t\tthis.nav.classList.contains( 'open-on-click' ) ||\n\t\t\t\tthis.nav.classList.contains( 'open-submenus-on-click' ) ||\n\t\t\t\tthis.nav.classList.contains( 'has-open-submenus-on-click' )\n\t\t\t) {\n\t\t\t\topenSubmenusOnClickAttr = 'true';\n\t\t\t}\n\t\t}\n\n\t\t// Check list items for the class too (WordPress might set it on individual items)\n\t\tif ( openSubmenusOnClickAttr === null && this.list ) {\n\t\t\tconst firstItem = this.list.querySelector(\n\t\t\t\t'li.has-child, li.open-on-click'\n\t\t\t);\n\t\t\tif (\n\t\t\t\tfirstItem &&\n\t\t\t\t( firstItem.classList.contains( 'open-on-click' ) ||\n\t\t\t\t\tfirstItem.classList.contains( 'open-submenus-on-click' ) )\n\t\t\t) {\n\t\t\t\topenSubmenusOnClickAttr = 'true';\n\t\t\t}\n\t\t}\n\n\t\t// WordPress may use '1' for true, '0' for false, or boolean strings\n\t\t// Default to false if not found\n\t\tthis.openSubmenusOnClick =\n\t\t\topenSubmenusOnClickAttr === 'true' ||\n\t\t\topenSubmenusOnClickAttr === '1' ||\n\t\t\topenSubmenusOnClickAttr === '';\n\n\t\t// (Debug logging removed for production.)\n\n\t\tif ( ! this.list ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Create More button and dropdown\n\t\tthis.createMoreButton();\n\n\t\tthis.items = Array.from( this.list.children );\n\t\tthis.itemWidths = [];\n\t\tthis.isOpen = false;\n\t\tthis.isCalculating = false;\n\t\tthis.openAccordions = [];\n\t\tthis.submenuCounter = 0; // For generating unique IDs\n\n\t\t// Track responsive container for hamburger mode detection\n\t\tthis.responsiveContainer = this.nav.querySelector(\n\t\t\t'.wp-block-navigation__responsive-container'\n\t\t);\n\t\tthis.mutationObserver = null;\n\t\tthis.retryTimeout = null;\n\t\tthis.isEnabled = true; // Track if Priority Nav should be active\n\n\t\tthis.init();\n\t}\n\n\tcreateMoreButton() {\n\t\t// Create the more container\n\t\tthis.moreContainer = document.createElement( 'div' );\n\t\tthis.moreContainer.className = 'priority-nav-more';\n\n\t\t// Create button\n\t\tthis.moreButton = document.createElement( 'button' );\n\t\tthis.moreButton.type = 'button';\n\t\tthis.moreButton.className =\n\t\t\t'priority-nav-more-button wp-block-navigation-item';\n\t\tthis.moreButton.setAttribute( 'aria-expanded', 'false' );\n\t\tthis.moreButton.setAttribute( 'aria-haspopup', 'true' );\n\t\tthis.moreButton.setAttribute( 'aria-label', this.moreLabel );\n\n\t\tconst iconMap = {\n\t\t\tdots: '•••',\n\t\t\tchevron: '▼',\n\t\t\tplus: '+',\n\t\t\tmenu: '≡',\n\t\t};\n\n\t\tthis.moreButton.innerHTML = `\n\t\t\t<span class=\"wp-block-navigation-item__label\">${ this.moreLabel }</span>\n\t\t\t<span class=\"priority-nav-icon\">${\n\t\t\t\ticonMap[ this.moreIcon ] || iconMap.dots\n\t\t\t}</span>\n\t\t`;\n\n\t\t// Create dropdown\n\t\tthis.dropdown = document.createElement( 'ul' );\n\t\tthis.dropdown.className =\n\t\t\t'priority-nav-dropdown wp-block-navigation__submenu-container';\n\t\tthis.dropdown.setAttribute( 'role', 'menu' );\n\n\t\tthis.moreContainer.appendChild( this.moreButton );\n\t\tthis.moreContainer.appendChild( this.dropdown );\n\n\t\t// Insert after the navigation list\n\t\tthis.list.parentNode.appendChild( this.moreContainer );\n\t\tthis.moreContainer.style.display = 'none';\n\t}\n\n\tinit() {\n\t\tthis.setupEventListeners();\n\t\tthis.setupResponsiveObserver();\n\n\t\t// Check if we should enable Priority Nav\n\t\tif ( this.isInHamburgerMode() ) {\n\t\t\tthis.disablePriorityNav();\n\t\t} else {\n\t\t\tthis.enablePriorityNav();\n\t\t}\n\n\t\tconst resizeObserver = new ResizeObserver( () => {\n\t\t\tif ( ! this.isCalculating ) {\n\t\t\t\t// Check if we've transitioned between hamburger and desktop mode\n\t\t\t\tconst wasEnabled = this.isEnabled;\n\t\t\t\tconst inHamburger = this.isInHamburgerMode();\n\n\t\t\t\tif ( inHamburger && wasEnabled ) {\n\t\t\t\t\tthis.disablePriorityNav();\n\t\t\t\t} else if ( ! inHamburger && ! wasEnabled ) {\n\t\t\t\t\tthis.enablePriorityNav();\n\t\t\t\t} else if ( ! inHamburger && wasEnabled ) {\n\t\t\t\t\t// Still in desktop mode, just recalculate\n\t\t\t\t\trequestAnimationFrame( () => this.checkOverflow() );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t\tresizeObserver.observe( this.wrapper );\n\t}\n\n\t/**\n\t * Check if navigation is in hamburger/responsive mode\n\t * Returns true if the menu container is hidden or in responsive overlay mode\n\t */\n\tisInHamburgerMode() {\n\t\t// Check if responsive container exists and is the active one\n\t\tif ( this.responsiveContainer ) {\n\t\t\tconst containerStyles = window.getComputedStyle(\n\t\t\t\tthis.responsiveContainer\n\t\t\t);\n\t\t\tconst isHidden =\n\t\t\t\tcontainerStyles.display === 'none' ||\n\t\t\t\tcontainerStyles.visibility === 'hidden' ||\n\t\t\t\tthis.responsiveContainer.getAttribute( 'aria-hidden' ) ===\n\t\t\t\t\t'true';\n\n\t\t\t// If responsive container exists and is hidden, we're in hamburger mode\n\t\t\tif ( isHidden ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// Check if the main list container is hidden (fallback detection)\n\t\tif ( this.list ) {\n\t\t\tconst listStyles = window.getComputedStyle( this.list );\n\t\t\tconst listRect = this.list.getBoundingClientRect();\n\n\t\t\t// If list is hidden or has zero width, likely in hamburger mode\n\t\t\tif (\n\t\t\t\tlistStyles.display === 'none' ||\n\t\t\t\tlistStyles.visibility === 'hidden' ||\n\t\t\t\tlistRect.width === 0\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Check if the navigation list is measurable (visible and has dimensions)\n\t */\n\tisMeasurable() {\n\t\tif ( ! this.list ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst styles = window.getComputedStyle( this.list );\n\t\tconst rect = this.list.getBoundingClientRect();\n\n\t\t// Must be visible and have actual width\n\t\treturn (\n\t\t\tstyles.display !== 'none' &&\n\t\t\tstyles.visibility !== 'hidden' &&\n\t\t\trect.width > 0 &&\n\t\t\trect.height > 0\n\t\t);\n\t}\n\n\t/**\n\t * Disable Priority Nav when in hamburger mode\n\t */\n\tdisablePriorityNav() {\n\t\tthis.isEnabled = false;\n\n\t\t// Show all items\n\t\tthis.items.forEach( ( item ) => {\n\t\t\titem.style.display = '';\n\t\t} );\n\n\t\t// Hide the More button\n\t\tif ( this.moreContainer ) {\n\t\t\tthis.moreContainer.style.display = 'none';\n\t\t}\n\n\t\t// Close dropdown if open\n\t\tthis.closeDropdown();\n\t}\n\n\t/**\n\t * Enable Priority Nav and recalculate\n\t */\n\tenablePriorityNav() {\n\t\tthis.isEnabled = true;\n\n\t\t// Only proceed if measurable\n\t\tif ( ! this.isMeasurable() ) {\n\t\t\t// Schedule retry\n\t\t\tthis.scheduleRetry();\n\t\t\treturn;\n\t\t}\n\n\t\t// Cache widths if needed (or if they contain zeros from previous hidden state)\n\t\tconst needsRecache =\n\t\t\tthis.itemWidths.length === 0 ||\n\t\t\tthis.itemWidths.some( ( width ) => width === 0 );\n\n\t\tif ( needsRecache ) {\n\t\t\tthis.cacheItemWidths();\n\t\t}\n\n\t\t// Recalculate overflow\n\t\trequestAnimationFrame( () => {\n\t\t\tthis.checkOverflow();\n\t\t} );\n\t}\n\n\t/**\n\t * Schedule a retry when menu becomes visible\n\t * @param maxAttempts\n\t */\n\tscheduleRetry( maxAttempts = 20 ) {\n\t\tif ( this.retryTimeout ) {\n\t\t\tclearTimeout( this.retryTimeout );\n\t\t}\n\n\t\tlet attempts = 0;\n\t\tconst tryEnable = () => {\n\t\t\tattempts++;\n\n\t\t\tif ( this.isMeasurable() && ! this.isInHamburgerMode() ) {\n\t\t\t\tthis.enablePriorityNav();\n\t\t\t\tthis.retryTimeout = null;\n\t\t\t} else if ( attempts < maxAttempts ) {\n\t\t\t\tthis.retryTimeout = setTimeout( tryEnable, 100 );\n\t\t\t} else {\n\t\t\t\t// Give up after max attempts\n\t\t\t\tthis.retryTimeout = null;\n\t\t\t}\n\t\t};\n\n\t\tthis.retryTimeout = setTimeout( tryEnable, 100 );\n\t}\n\n\t/**\n\t * Set up observer for responsive container changes\n\t */\n\tsetupResponsiveObserver() {\n\t\tif ( ! this.responsiveContainer ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Watch for attribute and class changes on responsive container\n\t\tthis.mutationObserver = new MutationObserver( ( mutations ) => {\n\t\t\tlet shouldCheck = false;\n\n\t\t\tmutations.forEach( ( mutation ) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === 'attributes' &&\n\t\t\t\t\t( mutation.attributeName === 'aria-hidden' ||\n\t\t\t\t\t\tmutation.attributeName === 'class' )\n\t\t\t\t) {\n\t\t\t\t\tshouldCheck = true;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tif ( shouldCheck ) {\n\t\t\t\tconst inHamburger = this.isInHamburgerMode();\n\n\t\t\t\tif ( inHamburger && this.isEnabled ) {\n\t\t\t\t\tthis.disablePriorityNav();\n\t\t\t\t} else if ( ! inHamburger && ! this.isEnabled ) {\n\t\t\t\t\tthis.enablePriorityNav();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\tthis.mutationObserver.observe( this.responsiveContainer, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [ 'aria-hidden', 'class' ],\n\t\t} );\n\n\t\t// Also observe the list container for visibility changes\n\t\tif ( this.list ) {\n\t\t\tthis.mutationObserver.observe( this.list, {\n\t\t\t\tattributes: true,\n\t\t\t\tattributeFilter: [ 'style', 'class' ],\n\t\t\t\tattributeOldValue: false,\n\t\t\t} );\n\t\t}\n\t}\n\n\tcacheItemWidths() {\n\t\t// Only cache if measurable\n\t\tif ( ! this.isMeasurable() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.items.forEach( ( item ) => {\n\t\t\titem.style.display = '';\n\t\t} );\n\n\t\t// Force a reflow to ensure accurate measurements\n\t\tvoid this.list.offsetHeight;\n\n\t\tthis.itemWidths = this.items.map( ( item ) => {\n\t\t\tconst rect = item.getBoundingClientRect();\n\t\t\treturn rect.width > 0 ? rect.width : 0;\n\t\t} );\n\n\t\t// If we got zero widths, schedule a retry\n\t\tif ( this.itemWidths.some( ( width ) => width === 0 ) ) {\n\t\t\tthis.scheduleRetry();\n\t\t}\n\t}\n\n\tsetupEventListeners() {\n\t\tthis.moreButton.addEventListener( 'click', ( e ) => {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tthis.toggleDropdown();\n\t\t} );\n\n\t\tdocument.addEventListener( 'click', ( e ) => {\n\t\t\tif ( ! this.moreContainer.contains( e.target ) && this.isOpen ) {\n\t\t\t\tthis.closeDropdown();\n\t\t\t}\n\t\t} );\n\n\t\tdocument.addEventListener( 'keydown', ( e ) => {\n\t\t\tif ( e.key === 'Escape' && this.isOpen ) {\n\t\t\t\t// If accordions are open, close them first, otherwise close dropdown\n\t\t\t\tif ( this.openAccordions.length > 0 ) {\n\t\t\t\t\tthis.closeAllAccordions();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t} else {\n\t\t\t\t\tthis.closeDropdown();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\t// Event delegation for accordion toggles\n\t\tthis.dropdown.addEventListener( 'click', ( e ) => {\n\t\t\tconst toggle = e.target.closest( '.priority-nav-accordion-toggle' );\n\t\t\tif ( toggle ) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tconst submenuId = toggle.getAttribute( 'aria-controls' );\n\t\t\t\t// Use scoped lookup within this instance's dropdown to avoid cross-instance collisions\n\t\t\t\tconst submenu = this.dropdown.querySelector( `#${ submenuId }` );\n\t\t\t\tif ( submenu ) {\n\t\t\t\t\tthis.toggleAccordionItem( toggle, submenu );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tcheckOverflow() {\n\t\t// Don't run if disabled (hamburger mode) or not measurable\n\t\tif ( ! this.isEnabled || ! this.isMeasurable() ) {\n\t\t\tthis.isCalculating = false;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isCalculating = true;\n\n\t\t// Get actual visible container width - prefer the nav element itself\n\t\tconst navRect = this.nav.getBoundingClientRect();\n\t\tconst navStyles = window.getComputedStyle( this.nav );\n\t\tconst padding =\n\t\t\tparseFloat( navStyles.paddingLeft ) +\n\t\t\tparseFloat( navStyles.paddingRight );\n\n\t\t// Get gap from the container that actually has it (usually the list container)\n\t\tconst listStyles = window.getComputedStyle( this.list );\n\t\tconst gap =\n\t\t\tparseFloat( listStyles.gap ) || parseFloat( navStyles.gap ) || 8; // Fallback\n\n\t\t// Use nav width if available, otherwise fall back to wrapper\n\t\tconst availableWidth =\n\t\t\tnavRect.width > 0\n\t\t\t\t? navRect.width - padding\n\t\t\t\t: this.wrapper.getBoundingClientRect().width - padding;\n\n\t\t// Temporarily show more button to measure it\n\t\tthis.moreContainer.style.display = '';\n\t\t// Force a reflow for accurate measurement\n\t\tvoid this.moreButton.offsetHeight;\n\t\tconst moreButtonWidth = this.moreButton.getBoundingClientRect().width;\n\n\t\t// Ensure we have valid item widths\n\t\tif (\n\t\t\tthis.itemWidths.length === 0 ||\n\t\t\tthis.itemWidths.some( ( width ) => width === 0 )\n\t\t) {\n\t\t\tthis.cacheItemWidths();\n\t\t\t// If still invalid, abort\n\t\t\tif (\n\t\t\t\tthis.itemWidths.length === 0 ||\n\t\t\t\tthis.itemWidths.some( ( width ) => width === 0 )\n\t\t\t) {\n\t\t\t\tthis.isCalculating = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tlet visibleCount = 0;\n\n\t\t// First pass: try to fit all items\n\t\tlet totalWidth = 0;\n\t\tfor ( let i = 0; i < this.items.length; i++ ) {\n\t\t\tconst itemWidth = this.itemWidths[ i ];\n\t\t\tconst gapWidth = i > 0 ? gap : 0; // Gap before item (not for first item)\n\t\t\ttotalWidth += gapWidth + itemWidth;\n\t\t}\n\n\t\t// If everything fits, show all items and hide the More button\n\t\tif ( totalWidth <= availableWidth ) {\n\t\t\tthis.items.forEach( ( item ) => ( item.style.display = '' ) );\n\t\t\tthis.moreContainer.style.display = 'none';\n\t\t\tthis.closeDropdown();\n\t\t\tthis.isCalculating = false;\n\t\t\treturn;\n\t\t}\n\n\t\t// Calculate how many items fit with the More button visible\n\t\tlet usedWidth = 0;\n\t\tfor ( let i = 0; i < this.items.length; i++ ) {\n\t\t\tconst itemWidth = this.itemWidths[ i ];\n\t\t\tconst gapWidth = i > 0 ? gap : 0;\n\t\t\tconst moreButtonGap = gap; // Gap before the More button\n\t\t\tconst itemTotalWidth = gapWidth + itemWidth;\n\n\t\t\t// Check if this item + more button would fit\n\t\t\tconst wouldFit =\n\t\t\t\tusedWidth + itemTotalWidth + moreButtonGap + moreButtonWidth <=\n\t\t\t\tavailableWidth;\n\n\t\t\t// Always show at least one item\n\t\t\tif ( wouldFit || i === 0 ) {\n\t\t\t\tthis.items[ i ].style.display = '';\n\t\t\t\tusedWidth += itemTotalWidth;\n\t\t\t\tvisibleCount++;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// Move overflow items to dropdown - build fresh accordion HTML\n\t\tthis.dropdown.innerHTML = '';\n\t\tthis.submenuCounter = 0; // Reset counter\n\t\tlet hasHiddenItems = false;\n\n\t\tfor ( let i = visibleCount; i < this.items.length; i++ ) {\n\t\t\tthis.items[ i ].style.display = 'none';\n\n\t\t\t// Extract data from the item\n\t\t\tconst itemData = this.extractNavItemData( this.items[ i ] );\n\n\t\t\t// Build fresh accordion HTML\n\t\t\tconst accordionHTML = this.buildAccordionHTML( itemData, 0 );\n\n\t\t\t// Create container and insert HTML\n\t\t\tconst container = document.createElement( 'li' );\n\t\t\tcontainer.innerHTML = accordionHTML;\n\n\t\t\tthis.dropdown.appendChild( container );\n\t\t\thasHiddenItems = true;\n\t\t}\n\n\t\t// Show/hide More button (should always be visible here since we broke out of the first check)\n\t\tif ( hasHiddenItems ) {\n\t\t\tthis.moreContainer.style.display = '';\n\t\t} else {\n\t\t\tthis.moreContainer.style.display = 'none';\n\t\t\tthis.closeDropdown();\n\t\t}\n\n\t\tthis.isCalculating = false;\n\t}\n\n\ttoggleDropdown() {\n\t\tif ( this.isOpen ) {\n\t\t\tthis.closeDropdown();\n\t\t} else {\n\t\t\tthis.openDropdown();\n\t\t}\n\t}\n\n\topenDropdown() {\n\t\tthis.isOpen = true;\n\t\tthis.dropdown.classList.add( 'is-open' );\n\t\tthis.moreButton.setAttribute( 'aria-expanded', 'true' );\n\t}\n\n\tcloseDropdown() {\n\t\tthis.isOpen = false;\n\t\tthis.dropdown.classList.remove( 'is-open' );\n\t\tthis.moreButton.setAttribute( 'aria-expanded', 'false' );\n\t\t// Close all open accordions\n\t\tthis.closeAllAccordions();\n\t}\n\n\textractNavItemData( item ) {\n\t\t// Extract data from a navigation list item\n\t\tconst data = {\n\t\t\ttext: '',\n\t\t\turl: '#',\n\t\t\thasSubmenu: false,\n\t\t\tchildren: [],\n\t\t};\n\n\t\t// Check for submenu FIRST - if it exists, we need to get text differently\n\t\tconst submenuContainer = item.querySelector(\n\t\t\t':scope > .wp-block-navigation__submenu-container'\n\t\t);\n\n\t\t// Find the link element\n\t\tlet linkElement = item.querySelector( ':scope > a' );\n\t\tif ( ! linkElement ) {\n\t\t\tlinkElement = item.querySelector(\n\t\t\t\t':scope > .wp-block-navigation-item__content a'\n\t\t\t);\n\t\t}\n\t\tif ( ! linkElement ) {\n\t\t\t// Fallback: try to get text from item directly, but exclude submenu text\n\t\t\tif ( submenuContainer ) {\n\t\t\t\t// Clone item, remove submenu, then get text\n\t\t\t\tconst clone = item.cloneNode( true );\n\t\t\t\tconst cloneSubmenu = clone.querySelector(\n\t\t\t\t\t'.wp-block-navigation__submenu-container'\n\t\t\t\t);\n\t\t\t\tif ( cloneSubmenu ) {\n\t\t\t\t\tcloneSubmenu.remove();\n\t\t\t\t}\n\t\t\t\tdata.text = clone.textContent.trim();\n\t\t\t} else {\n\t\t\t\tdata.text = item.textContent.trim();\n\t\t\t}\n\t\t\tif ( submenuContainer ) {\n\t\t\t\tdata.hasSubmenu = true;\n\t\t\t\tconst childItems =\n\t\t\t\t\tsubmenuContainer.querySelectorAll( ':scope > li' );\n\t\t\t\tchildItems.forEach( ( childItem ) => {\n\t\t\t\t\tdata.children.push( this.extractNavItemData( childItem ) );\n\t\t\t\t} );\n\t\t\t}\n\t\t\treturn data;\n\t\t}\n\n\t\t// Extract text - only get direct text content, not from nested elements or submenu\n\t\t// Get the label element if it exists (WordPress navigation uses this)\n\t\tconst label = linkElement.querySelector(\n\t\t\t'.wp-block-navigation-item__label'\n\t\t);\n\t\tif ( label ) {\n\t\t\tdata.text = label.textContent.trim();\n\t\t} else {\n\t\t\t// No label - extract only direct text nodes, not from nested elements\n\t\t\t// Clone link and remove all child elements to get only text\n\t\t\tconst linkClone = linkElement.cloneNode( true );\n\t\t\tconst allChildren = linkClone.querySelectorAll( '*' );\n\t\t\tallChildren.forEach( ( child ) => child.remove() );\n\t\t\tdata.text = linkClone.textContent.trim();\n\n\t\t\t// If that didn't work, try getting first text node only\n\t\t\tif ( ! data.text ) {\n\t\t\t\tconst textNodes = Array.from( linkElement.childNodes ).filter(\n\t\t\t\t\t( node ) => node.nodeType === Node.TEXT_NODE\n\t\t\t\t);\n\t\t\t\tif ( textNodes.length > 0 ) {\n\t\t\t\t\tdata.text = textNodes\n\t\t\t\t\t\t.map( ( node ) => node.textContent.trim() )\n\t\t\t\t\t\t.filter( ( t ) => t )\n\t\t\t\t\t\t.join( ' ' );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Ensure we don't have submenu text mixed in (safety check)\n\t\tif ( submenuContainer && data.text ) {\n\t\t\t// If text seems unusually long or contains child item text, try to clean it\n\t\t\tconst childTexts = [];\n\t\t\tsubmenuContainer\n\t\t\t\t.querySelectorAll( 'li a' )\n\t\t\t\t.forEach( ( childLink ) => {\n\t\t\t\t\tconst childText = childLink.textContent.trim();\n\t\t\t\t\tif ( childText && data.text.includes( childText ) ) {\n\t\t\t\t\t\tchildTexts.push( childText );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t// Remove child texts from parent text if they're found\n\t\t\tif ( childTexts.length > 0 ) {\n\t\t\t\tchildTexts.forEach( ( childText ) => {\n\t\t\t\t\tdata.text = data.text.replace( childText, '' ).trim();\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tdata.url = linkElement.getAttribute( 'href' ) || '#';\n\n\t\t// Extract children if submenu exists\n\t\tif ( submenuContainer ) {\n\t\t\tdata.hasSubmenu = true;\n\n\t\t\t// Extract children recursively\n\t\t\tconst childItems =\n\t\t\t\tsubmenuContainer.querySelectorAll( ':scope > li' );\n\t\t\tchildItems.forEach( ( childItem ) => {\n\t\t\t\tdata.children.push( this.extractNavItemData( childItem ) );\n\t\t\t} );\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tbuildAccordionHTML( data, level ) {\n\t\tconst submenuId = `${ this.instanceId }-submenu-${ this.submenuCounter++ }`;\n\t\tlet html = '';\n\n\t\tif ( data.hasSubmenu ) {\n\t\t\t// Item has children - build accordion\n\t\t\tif ( this.openSubmenusOnClick ) {\n\t\t\t\t// Click mode: entire item is clickable\n\t\t\t\thtml = `\n\t\t\t\t\t<button type=\"button\" class=\"priority-nav-accordion-toggle priority-nav-accordion-toggle-full\" \n\t\t\t\t\t        aria-expanded=\"false\" aria-controls=\"${ submenuId }\">\n\t\t\t\t\t\t<span class=\"priority-nav-accordion-text\">${ this.escapeHtml(\n\t\t\t\t\t\t\tdata.text\n\t\t\t\t\t\t) }</span>\n\t\t\t\t\t\t<span class=\"priority-nav-accordion-arrow\" aria-hidden=\"true\">›</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<ul class=\"priority-nav-accordion-content\" id=\"${ submenuId }\" aria-hidden=\"true\">\n\t\t\t\t`;\n\t\t\t} else {\n\t\t\t\t// Arrow mode: link stays functional, separate arrow button\n\t\t\t\thtml = `\n\t\t\t\t\t<span class=\"priority-nav-accordion-wrapper\">\n\t\t\t\t\t\t<a href=\"${ this.escapeHtml(\n\t\t\t\t\t\t\tdata.url\n\t\t\t\t\t\t) }\" class=\"priority-nav-accordion-link\">${ this.escapeHtml(\n\t\t\t\t\t\t\tdata.text\n\t\t\t\t\t\t) }</a>\n\t\t\t\t\t\t<button type=\"button\" class=\"priority-nav-accordion-toggle priority-nav-accordion-toggle-arrow\" \n\t\t\t\t\t\t        aria-expanded=\"false\" aria-controls=\"${ submenuId }\" aria-label=\"Toggle submenu\">\n\t\t\t\t\t\t\t<span class=\"priority-nav-accordion-arrow\" aria-hidden=\"true\">›</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</span>\n\t\t\t\t\t<ul class=\"priority-nav-accordion-content\" id=\"${ submenuId }\" aria-hidden=\"true\">\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\t// Build children\n\t\t\tdata.children.forEach( ( child ) => {\n\t\t\t\thtml += `<li>${ this.buildAccordionHTML(\n\t\t\t\t\tchild,\n\t\t\t\t\tlevel + 1\n\t\t\t\t) }</li>`;\n\t\t\t} );\n\n\t\t\thtml += '</ul>';\n\t\t} else {\n\t\t\t// No submenu - just a link\n\t\t\thtml = `<a href=\"${ this.escapeHtml(\n\t\t\t\tdata.url\n\t\t\t) }\">${ this.escapeHtml( data.text ) }</a>`;\n\t\t}\n\n\t\treturn html;\n\t}\n\n\tescapeHtml( text ) {\n\t\tconst div = document.createElement( 'div' );\n\t\tdiv.textContent = text;\n\t\treturn div.innerHTML;\n\t}\n\n\ttoggleAccordionItem( button, submenu ) {\n\t\tconst isExpanded = button.getAttribute( 'aria-expanded' ) === 'true';\n\n\t\tif ( isExpanded ) {\n\t\t\t// Close this accordion\n\t\t\tbutton.setAttribute( 'aria-expanded', 'false' );\n\t\t\tsubmenu.style.setProperty( 'display', 'none', 'important' );\n\t\t\tsubmenu.classList.remove( 'is-open' );\n\t\t\tsubmenu.setAttribute( 'aria-hidden', 'true' );\n\n\t\t\t// Remove from open accordions array\n\t\t\tthis.openAccordions = this.openAccordions.filter(\n\t\t\t\t( item ) => item.button !== button\n\t\t\t);\n\n\t\t\t// Close any nested accordions\n\t\t\tconst nestedAccordions = submenu.querySelectorAll(\n\t\t\t\t'.priority-nav-accordion-toggle[aria-expanded=\"true\"]'\n\t\t\t);\n\t\t\tnestedAccordions.forEach( ( nestedButton ) => {\n\t\t\t\tconst nestedSubmenuId =\n\t\t\t\t\tnestedButton.getAttribute( 'aria-controls' );\n\t\t\t\t// Use scoped lookup within this instance's dropdown to avoid cross-instance collisions\n\t\t\t\tconst nestedSubmenu = this.dropdown.querySelector(\n\t\t\t\t\t`#${ nestedSubmenuId }`\n\t\t\t\t);\n\t\t\t\tif ( nestedSubmenu ) {\n\t\t\t\t\tnestedButton.setAttribute( 'aria-expanded', 'false' );\n\t\t\t\t\tnestedSubmenu.style.setProperty(\n\t\t\t\t\t\t'display',\n\t\t\t\t\t\t'none',\n\t\t\t\t\t\t'important'\n\t\t\t\t\t);\n\t\t\t\t\tnestedSubmenu.classList.remove( 'is-open' );\n\t\t\t\t\tnestedSubmenu.setAttribute( 'aria-hidden', 'true' );\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\t// Open this accordion\n\t\t\tbutton.setAttribute( 'aria-expanded', 'true' );\n\t\t\t// Force display block with !important via style\n\t\t\tsubmenu.style.setProperty( 'display', 'block', 'important' );\n\t\t\tsubmenu.style.setProperty( 'opacity', '1', 'important' );\n\t\t\tsubmenu.style.setProperty( 'visibility', 'visible', 'important' );\n\t\t\tsubmenu.style.setProperty( 'position', 'static', 'important' );\n\t\t\tsubmenu.classList.add( 'is-open' );\n\t\t\tsubmenu.setAttribute( 'aria-hidden', 'false' );\n\n\t\t\t// Add to open accordions array\n\t\t\tthis.openAccordions.push( { button, submenu } );\n\t\t}\n\t}\n\n\tcloseAllAccordions() {\n\t\tthis.openAccordions.forEach( ( { button, submenu } ) => {\n\t\t\tbutton.setAttribute( 'aria-expanded', 'false' );\n\t\t\tsubmenu.style.setProperty( 'display', 'none', 'important' );\n\t\t\tsubmenu.classList.remove( 'is-open' );\n\t\t\tsubmenu.setAttribute( 'aria-hidden', 'true' );\n\t\t} );\n\t\tthis.openAccordions = [];\n\t}\n\n\t/**\n\t * Cleanup observers and timeouts\n\t */\n\tdestroy() {\n\t\tif ( this.mutationObserver ) {\n\t\t\tthis.mutationObserver.disconnect();\n\t\t\tthis.mutationObserver = null;\n\t\t}\n\n\t\tif ( this.retryTimeout ) {\n\t\t\tclearTimeout( this.retryTimeout );\n\t\t\tthis.retryTimeout = null;\n\t\t}\n\t}\n}\n\n// Initialize on DOM ready\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\t// Support both wrapper mode and direct mode\n\t// Wrapper mode: [data-priority-nav] containing .wp-block-navigation\n\t// Direct mode: .wp-block-navigation[data-priority-nav]\n\tconst wrapperElements = document.querySelectorAll(\n\t\t'[data-priority-nav]:not(.wp-block-navigation)'\n\t);\n\tconst directNavElements = document.querySelectorAll(\n\t\t'.wp-block-navigation[data-priority-nav]'\n\t);\n\n\t// Initialize wrapper mode (backward compatibility)\n\twrapperElements.forEach( ( element ) => new PriorityNav( element ) );\n\n\t// Initialize direct mode (new variation approach)\n\tdirectNavElements.forEach( ( element ) => new PriorityNav( element ) );\n} );\n"],"names":["PriorityNav","instanceCounter","constructor","element","instanceId","classList","contains","hasAttribute","nav","wrapper","querySelector","list","moreLabel","getAttribute","moreIcon","openSubmenusOnClickAttr","attributes","i","length","attr","name","toLowerCase","includes","value","firstItem","openSubmenusOnClick","createMoreButton","items","Array","from","children","itemWidths","isOpen","isCalculating","openAccordions","submenuCounter","responsiveContainer","mutationObserver","retryTimeout","isEnabled","init","moreContainer","document","createElement","className","moreButton","type","setAttribute","iconMap","dots","chevron","plus","menu","innerHTML","dropdown","appendChild","parentNode","style","display","setupEventListeners","setupResponsiveObserver","isInHamburgerMode","disablePriorityNav","enablePriorityNav","resizeObserver","ResizeObserver","wasEnabled","inHamburger","requestAnimationFrame","checkOverflow","observe","containerStyles","window","getComputedStyle","isHidden","visibility","listStyles","listRect","getBoundingClientRect","width","isMeasurable","styles","rect","height","forEach","item","closeDropdown","scheduleRetry","needsRecache","some","cacheItemWidths","maxAttempts","clearTimeout","attempts","tryEnable","setTimeout","MutationObserver","mutations","shouldCheck","mutation","attributeName","attributeFilter","attributeOldValue","offsetHeight","map","addEventListener","e","preventDefault","stopPropagation","toggleDropdown","target","key","closeAllAccordions","toggle","closest","submenuId","submenu","toggleAccordionItem","navRect","navStyles","padding","parseFloat","paddingLeft","paddingRight","gap","availableWidth","moreButtonWidth","visibleCount","totalWidth","itemWidth","gapWidth","usedWidth","moreButtonGap","itemTotalWidth","wouldFit","hasHiddenItems","itemData","extractNavItemData","accordionHTML","buildAccordionHTML","container","openDropdown","add","remove","data","text","url","hasSubmenu","submenuContainer","linkElement","clone","cloneNode","cloneSubmenu","textContent","trim","childItems","querySelectorAll","childItem","push","label","linkClone","allChildren","child","textNodes","childNodes","filter","node","nodeType","Node","TEXT_NODE","t","join","childTexts","childLink","childText","replace","level","html","escapeHtml","div","button","isExpanded","setProperty","nestedAccordions","nestedButton","nestedSubmenuId","nestedSubmenu","destroy","disconnect","wrapperElements","directNavElements"],"ignoreList":[],"sourceRoot":""}