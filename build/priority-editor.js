(()=>{"use strict";const o=window.wp.i18n,e=window.wp.blocks,r=window.wp.primitives,t=window.ReactJSXRuntime;var i=(0,t.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)(r.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M7.404 16.596a6.5 6.5 0 1 0 9.192-9.192 6.5 6.5 0 0 0-9.192 9.192ZM6.344 6.343a8 8 0 1 0 11.313 11.314A8 8 0 0 0 6.343 6.343Zm4.906 9.407v-3h-3v-1.5h3v-3h1.5v3h3v1.5h-3v3h-1.5Z"})});const a=window.wp.hooks;(0,e.registerBlockVariation)("core/navigation",{name:"priority-nav",title:(0,o.__)("Priority Plus Nav","priority-nav"),description:(0,o.__)('A responsive navigation that automatically moves overflow items to a "More" dropdown.',"priority-nav"),icon:i,scope:["inserter","transform"],attributes:{className:"is-style-priority-nav",overlayMenu:"never",priorityNavEnabled:!0,priorityNavMoreLabel:"More",priorityNavMoreBackgroundColor:void 0,priorityNavMoreBackgroundColorHover:void 0,priorityNavMoreTextColor:void 0,priorityNavMoreTextColorHover:void 0},isActive:(o,e)=>o.className?.includes(e.className)}),(0,a.addFilter)("blocks.registerBlockType","priority-nav/extend-core-navigation",(o,e)=>"core/navigation"!==e?o:{...o,attributes:{...o.attributes,priorityNavEnabled:{type:"boolean",default:!1},priorityNavMoreLabel:{type:"string",default:"More"},priorityNavMoreIcon:{type:"string",default:"none"},priorityNavMoreBackgroundColor:{type:"string"},priorityNavMoreBackgroundColorHover:{type:"string"},priorityNavMoreTextColor:{type:"string"},priorityNavMoreTextColorHover:{type:"string"},priorityNavMorePadding:{type:"object",default:void 0}}});const n=window.wp.blockEditor,l=window.wp.components,s=window.wp.compose,v=window.wp.element,p=(0,s.createHigherOrderComponent)(o=>e=>{const{name:r,attributes:i}=e;if("core/navigation"!==r)return(0,t.jsx)(o,{...e});const a=(i.className||"").includes("is-style-priority-nav")||!0===i.priorityNavEnabled;return(0,v.useEffect)(()=>{if(!a)return;const o=document.querySelector(".block-editor-block-inspector");if(!o)return;const e=o.querySelector('.components-toggle-group-control-option-base[data-value="always"]');e&&(e.style.opacity="0.4",e.style.pointerEvents="none",e.style.textDecoration="line-through",e.style.cursor="not-allowed")},[a,i.overlayMenu]),(0,t.jsx)(o,{...e})},"addDisableAlwaysOption"),d=(0,s.createHigherOrderComponent)(e=>r=>{const{name:i,attributes:a,setAttributes:s}=r;if("core/navigation"!==i)return(0,t.jsx)(e,{...r});const p=(a.className||"").includes("is-style-priority-nav")||!0===a.priorityNavEnabled;if(!p)return(0,t.jsx)(e,{...r});const{priorityNavEnabled:d,priorityNavMoreLabel:y,priorityNavMoreBackgroundColor:c,priorityNavMoreBackgroundColorHover:u,priorityNavMoreTextColor:g,priorityNavMoreTextColorHover:b,priorityNavMorePadding:w,overlayMenu:h}=a;(0,v.useEffect)(()=>{p&&"always"===h&&s({overlayMenu:"mobile"})},[p,h,s]);const M=(0,n.useSetting)("spacing.spacingSizes")||[];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e,{...r}),(0,t.jsx)(n.InspectorControls,{group:"settings",children:(0,t.jsx)(l.Notice,{status:"info",isDismissible:!1,children:(0,o.__)('Priority+ Navigation is not compatible with "Always" overlay menu. The overlay menu is set to "Mobile" to allow Priority+ to work on desktop.',"priority-nav")})}),(0,t.jsxs)(n.InspectorControls,{group:"styles",children:[(0,t.jsx)(l.__experimentalToolsPanel,{label:(0,o.__)("Priority Plus Settings","priority-nav"),resetAll:()=>s({priorityNavMoreLabel:"More"}),children:(0,t.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>!!y,label:(0,o.__)("More Button Label","priority-nav"),onDeselect:()=>s({priorityNavMoreLabel:"More"}),isShownByDefault:!0,children:(0,t.jsx)(l.TextControl,{label:(0,o.__)("More Button Label","priority-nav"),value:y,onChange:o=>s({priorityNavMoreLabel:o}),help:(0,o.__)('Text displayed on the "More" button',"priority-nav")})})}),(0,t.jsx)(n.PanelColorSettings,{title:(0,o.__)("Priority Plus Colors","priority-nav"),colorSettings:[{label:(0,o.__)("Button Text Color","priority-nav"),value:g,onChange:o=>s({priorityNavMoreTextColor:o||void 0}),clearable:!0},{label:(0,o.__)("Button Text Hover Color","priority-nav"),value:b,onChange:o=>s({priorityNavMoreTextColorHover:o||void 0}),clearable:!0},{label:(0,o.__)("Button Background Color","priority-nav"),value:c,onChange:o=>s({priorityNavMoreBackgroundColor:o||void 0}),clearable:!0},{label:(0,o.__)("Button Background Hover Color","priority-nav"),value:u,onChange:o=>s({priorityNavMoreBackgroundColorHover:o||void 0}),clearable:!0}]}),(0,t.jsx)(l.__experimentalToolsPanel,{label:(0,o.__)("Priority Plus Button","priority-nav"),resetAll:()=>s({priorityNavMorePadding:void 0}),children:(0,t.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>!!w&&Object.keys(w).length>0,label:(0,o.__)("Padding","priority-nav"),onDeselect:()=>s({priorityNavMorePadding:void 0}),isShownByDefault:!0,children:M.length>0?(0,t.jsx)(n.__experimentalSpacingSizesControl,{values:w,onChange:o=>s({priorityNavMorePadding:o}),label:(0,o.__)("Button Padding","priority-nav"),sides:["top","right","bottom","left"],units:["px","em","rem","vh","vw"]}):(0,t.jsx)(l.BoxControl,{label:(0,o.__)("Button Padding","priority-nav"),values:w,onChange:o=>s({priorityNavMorePadding:o}),sides:["top","right","bottom","left"],units:["px","em","rem","vh","vw"],allowReset:!0})})})]})]})},"withPriorityNavControls");(0,a.addFilter)("editor.BlockEdit","priority-nav/add-disable-always-option",p,5),(0,a.addFilter)("editor.BlockEdit","priority-nav/add-priority-nav-controls",d,10)})();